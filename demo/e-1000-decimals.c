#define CINT_SCALE 200

#include "cint.c"

#include <stdlib.h>
#include <stdio.h>

cint E ;

void compute_e(cint * e, int decimals) {
        cint a, b, c;
        cint_init(e, 0);
        cint_init(&c, 10);
        cint_powi(&c, 10 + decimals);
        cint_init(&b, 1);
        for (long long int i = 0; ; ++i) {
            a = c;
            if (i)
                cint_nat_muli(&b, (int) i);
            if (cint_compare(&a, &b) < 0)
                break;
            cint_divi(&a, &b);
            cint_addi(e, &a);
        }
    cint_init(&c, 10);
    cint_powi(&c, 10);
    cint_divi(e, &c);
}

int main(void){
    compute_e(&E, 1000);
    char *str = cint_to_string(&E, 10);
    printf("e = %c.%s", *str, str + 1);
    free(str);
}
/*
Output e = 2.71828182845904523536028747135266249775724709369995957496696762
772407663035354759457138217852516642742746639193200305992181741359662904357
290033429526059563073813232862794349076323382988075319525101901157383418793
070215408914993488416750924476146066808226480016847741185374234544243710753
907774499206955170276183860626133138458300075204493382656029760673711320070
932870912744374704723069697720931014169283681902551510865746377211125238978
442505695369677078544996996794686445490598793163688923009879312773617821542
499922957635148220826989519366803318252886939849646510582093923982948879332
036250944311730123819706841614039701983767932068328237646480429531180232878
250981945581530175671736133206981125099618188159304169035159888851934580727
386673858942287922849989208680582574927961048419844436346324496848756023362
482704197862320900216099023530436994184914631409343173814364054625315209618
369088870701676839642437814059271456354906130310720851038375051011574770417
18986106873969655212671546889570350354
*/
